## Introduction to Graphic User Interface of TREND  
### Description:  
Both GUI and command-line versions of TREND are available. The arguments 
and usages of GUI panels are briefly introduced below. Detailed explainations 
of choices of arguments and parameters are provided in the [manual for 
command-line versions](./manual.md).  
### Trendmain - Obtain Principal Components from a series of 2D Measurements
- Launch using `trendmaingui.exe` or `trendmaingui.app`. In the  left side 
bar, there are for different modes to choose from: **`basic`**, **`all_purpose`**, 
**`nmr`**, and **`movie`**. They function similarly with minor differences.  
<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png1_trendbasic.png?token=a6acdfe7048141d5b465d31ee0135ab59cec4d0c" alt="trend_basic" width="600">   
- The **`basic`** menu can be used for simple PCA work. A series of 2D data 
files (or an index file listing the series of data files) can be read by 
the `file` File Chooser widget. Note the `file` File Chooser can do two 
things:  If input file names contain numbers, TREND can extract numbers 
from the file names and sort these names numerically. A corresponding 
file index (`file.index`) will be generated automatically. Or you can 
make a file index manually with a text editor according to the format 
described in the [manual](./manual.md).  
- File format, scaling methods (on row), prefix of output file names can 
also be specified. The lower half of the panel shows optional arguments 
which can be left blnak. A file list the tick marks for the x-axis can be 
selected by the `xaixs` File Chooser. The units of the x axis can be also 
specified and will take effect if a file is selected in `xaxis`. When the 
`csv` checkbox is turned on, the PCA  results will be exported in 
comma-separated values (CSV) format that can be read by spreadsheets such 
as Excel or OpenOffice. The  `report` checkbox is on by default. This 
generates an HTML report of arguments used by main script, links to files 
generated by PCA (PC values, normalized PC1, other files for plots, the 
S matrix, etc), and illustrations of the scree plot, normalized PC1, 
first 3 PCs, and autocorrelation coefficents.  
<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png2_trendallpurpose.png?token=a29f558d3c884d07e6b842cf517323bcd86e8e6b" alt="all_purpose" width="600">   
- The **`all_purpose`** menu provides additional options. When the `reconst` 
otpion is turned on, temporary files are saved for later use in 
reconstruction of the data from the components specified.  Scaling of 
columns can be specified, but should not be necessary if the rows are 
scaled. If the input file type is Fourier-Transformed NMR spectrum 
(NMRPipe `ft2` format or Sparky `UCSF` format), the spectra can be 
"binned" for compression or uniformity. The `bintimes` parameter for this 
 can be speicified. Detail descriptions can be found in the [manual](/.manual.md). 
 In the **`all_purpose`** menu,  ICA (independent component analysis) can be selected instead of PCA. 
 When `ICA` is chosen, the number of independent components to be calculated 
should be specified (Xu and Van Doren, submitted).  
The **`all_purpose`** menu supports various formats, including **JCAMP-DX**, which 
is a general format for exchanging and archiving data from many instruments, 
inlcuding but not limited ot IR, Raman, Uv-Vis, Fluroescence, NMR, EMR,
mass spectrometery, and chromatography.   
- The **`nmr`** menu is for analysis of NMR spectra. It is similar to the 
**`all_purpose`** menu but only offers selection of data only in these formats: **JCAMP-DX format**, NMRPipe **fid** and **ft2**, Sparky **ucsf** and Sparky peak list as **sparkylist**, Bruker Topspin FID and spectra as **brukerfid** and **brukerspectra**, and Agilent (Varian) VnmrJ FID and spectra as **agilentfid** and **agilentspectra**. The Topspin and VnmrJ formats are saved as directories, contrasting them from the other formats that save data as individual files. Therefore 
a `dir` Directory Chooser widget is provided for the Topspin and VnmrJ 
data directories. Its usage is similar to the `file` File Chooser widget 
described previously. A manually made directory index, which is 
in the same form of `file.index` can still be read by the `file` File 
Chooser for parsing Topspin and VnmrJ directories. See [manual](./manual.md) for details.  
<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png3_trendNMR.png?token=31c066d33284a8200307ca95fab64e2bb69fc56f" width="600">    
The default scaling method of rows of the data matrix is **auto**, which 
is recommended for series of NMR spectra in fast or slow exchange 
regimes. **pareto** is recommended for spectra with intermdiate exchange. 
**noscaling** should be acceptable for all exchange regimes. Details of 
choosing scaling method and setting the threshold to filter out noise are 
given in the [manual](./manual.md) and [Jia Xu and Steven R. Van Doren, Binding Isotherms 
and Time Courses Readily from Magnetic Resonance. *Anal. Chem.* 2016, 88 
(16), pp 8172-8178](http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b01918)  
`threshold` and `thresholdnumber` can be set for filtering noise out of 
NMR spectra. The three ways to set the `threshold` are **auto**, **absolute**, 
and **the number of times the noise level**. In **auto** mode, the program 
determines noise from the first spectrum and sets the threshold as 4-fold 
the noise level for `autoscaling` and 0.5 times the noise level for 
`Pareto` scaling.  
<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png4_trendMovie.png?token=4def05fb9801be59e2ee58f8d6451275c0954f60" alt="movie" width="600">     
- The **`movie`** menu is for processing movies or time-dependent PNG image 
series. The recommended scaling method of rows is **noscaling**. A file 
listing tick marks for the x-axis can be specified. When processing a 
movie, time will be automatically extracted from the movie and saved as 
`movie_time.txt` for use as x-axis. The movie (but not series of PNG 
images) can be resized to make it smaller by skipping frames of the movie 
and setting the parameters `compress` and `sparsity` according to the 
[manual](./manual.md). TREND can select a certain portion of a movie by setting `starttime` and `endtime` parameters. 
The numberic format for setting the start and end time can either 
be floating point numbers of seconds (e.g. `0.2`), or `hh:mm:ss.ff`, such as 
`00:03:05.00`. The default values for the `starttime` and `endtime` are 
`0.0` and `end`, which do not trim the movie.   
### Trendplot -- display the principal components identified by the main script
- The program for plotting with GUI is `trendplotgui.exe` in Windows and 
Linux, or `trendplotgui.app` ini OS X. The `report` option of the main 
script generates an HTML report including several figures including the 
first 3 PCs and scree plot, `trendplotgui` non-essential for visualizaing 
results. However, `trendplotgui.exe` provides more control of plotting, 
 such as choices of kinds of normalization and single components to plot.   
<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png5_trendplotPCA.png?token=f6e6435856eb1c05bd6911f218319fbd00ef99f1" width="600" alt="pca">  
- There are two modes `trendplotgui`: PCA and ICA.. It is critical to select 
the appropriate mode.  
- **`pca`** mode: The V<sup>T</sup> matrix and S matrix are needed for plotting PCA results. 
These matrices can be selected using the `vtmatrix` and `smatrix` file 
choosers. However, there is an easier way: Setting `readparm` to `Yes` 
will read the arguments that `trendmain` used and automatically locate 
the matrices as well as the choices of `xaxis` and `xunit`. `pcn` sets 
the first N PCs to be plotted. When the `single` checkbox is turned on, 
`pcn` just plot the N<sup>th</sup> PC. The type of normalization can be selected by 
setting `normalmode` according to Table 1 of the [manual](./manual.md).  
- **`ica`** mode is very similar to **`pca`** mode, but does not read `smatrix` 
or show a scree plot.  
]<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png6_trendplot_ICA.png?token=b40217c3228e0dd9440e68fd9c610bd1a42980cd" alt="ica" width="600">   
### Trendreconstruct - Use the PCA calculations to reconstruct features in the sereis of 2D measurements  
`trendreconstructgui.exe` in Windows and Linux or `trendreconstruct.app` 
in OS X is the program with GUI that uses the results from `trendmaingui.exe` 
to reconstruct single or multiple PC representations of the original 
series of 2D measurements. It is quite self-explanatory. The 
[manual](./manual.md) provides more details.  
<img src="https://bytebucket.org/chia_hsu/trend/raw/72cf7b768324cb6311286619394581b4eea5558f/docs/png/png_gui/Png7_trendreconstruct.png?token=36161555615b4cdd12608a876f1e96ea64782cf4" alt="reconstruct" width="600">  
`trendreconstructgui` reads  parameters and results from `trendmain` or 
`trendmaingui`. A PCA calculation must be carried out by `trendmain` with the 
`reconstruction` option turned on. 
`trendmaingui` reads number of components to use in reconstruction by 
entering strings in the `--pcn` text box. The syntax it uses is 
equivalent to specifying pages in a print dialog. For example, `1` means 
reconstruct the 2D measurements using only the first component, while `2` 
uses the second component only. `1, 3-5, 7` means reconstruction by 
components 1, 3, 4, 5, 7.  
When performing reconstruction of a 
PNG image series, choosing to export the `original format` will actually
 generate an `mp4` movie clip. Choosing the `PNG` option instead plots 
 reconstructed images.  

